<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aerial Dash Â· Black Moon</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}

body{background:#000;overflow:hidden;color:white}

/* MENU */
#menu{
  position:fixed;inset:0;
  background:linear-gradient(to top,#000,#16002e);
  display:flex;flex-direction:column;
  justify-content:center;align-items:center;
  z-index:10;
}
#menu h1{font-size:2.5rem;margin-bottom:20px}
#menu button{
  padding:15px 50px;border:none;border-radius:30px;
  background:#7f00ff;color:white;font-size:1.2rem;
}

/* HUD */
#hud{
  position:fixed;top:10px;left:10px;
  background:rgba(0,0,0,.5);
  padding:12px 16px;border-radius:16px;z-index:5;
}

/* CANVAS */
canvas{display:block}

/* CONTROLES */
#controls{
  position:fixed;bottom:70px;right:15px;
  display:flex;flex-direction:column;gap:10px;z-index:5;
}
.controlBtn{
  width:85px;height:85px;border-radius:50%;
  border:none;color:white;font-size:.8rem;
}
#jumpBtn{background:rgba(127,0,255,.85)}
#pauseBtn{background:rgba(0,150,255,.85)}
#resetBtn{background:rgba(255,0,80,.85)}

/* FOOTER */
footer{
  position:fixed;bottom:0;width:100%;height:45px;
  background:#000;display:flex;
  justify-content:space-around;align-items:center;z-index:5;
}
footer a{color:white;font-size:.8rem;text-decoration:none}
</style>
</head>

<body>

<div id="menu">
  <h1>ðŸŒ™ Aerial Dash</h1>
  <button id="startBtn">INICIAR RITUAL</button>
</div>

<div id="hud">
  Fase Lunar: <span id="phase">I</span><br>
  Altura MÃ¡xima: <span id="record">0</span>
</div>

<canvas id="canvas"></canvas>

<div id="controls">
  <button id="jumpBtn" class="controlBtn">IMPULSO</button>
  <button id="pauseBtn" class="controlBtn">PAUSA</button>
  <button id="resetBtn" class="controlBtn">REINICIAR</button>
</div>

<footer>
  <a href="#">Podcast</a>
  <a href="#">Escuela</a>
  <a href="#">Records</a>
  <a href="#">Black Moon</a>
</footer>

<audio id="music" loop></audio>

<script>
/* CANVAS */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);

/* AUDIO */
const music=document.getElementById("music");
const tracks=[
 "bm_luna_nueva.mp3",
 "bm_creciente.mp3",
 "bm_llena.mp3",
 "bm_roja.mp3",
 "bm_eclipse.mp3"
];

/* ESTADO */
let running=false, paused=false;
let frame=0,speed=6,phase=1,score=0;
let record=localStorage.getItem("blackmoonRecord")||0;
recordSpan=document.getElementById("record");
recordSpan.innerText=record;

/* JUGADOR */
let player={
 x:80,y:0,w:50,h:50,vy:0,
 jump:-18,gravity:.9,onGround:false
};

/* OBSTÃCULOS */
let obstacles=[],particles=[];

/* CONTROLES */
function jump(){
 if(player.onGround && !paused){
  player.vy=player.jump;player.onGround=false;
 }
}
jumpBtn.onclick=jump;

pauseBtn.onclick=()=>{
 paused=!paused;
 pauseBtn.innerText=paused?"CONTINUAR":"PAUSA";
 if(!paused) loop();
};

resetBtn.onclick=()=>location.reload();

/* TECLADO */
addEventListener("keydown",e=>{
 if(e.code==="Space"||e.code==="ArrowUp") jump();
 if(e.key==="p"||e.key==="P") pauseBtn.click();
 if(e.key==="r"||e.key==="R") resetBtn.click();
});

/* LOOP */
function loop(){
 if(!running||paused) return;
 ctx.clearRect(0,0,canvas.width,canvas.height);

 ctx.fillStyle=phase%2===0?"#87CEEB":"#0a0018";
 ctx.fillRect(0,0,canvas.width,canvas.height);

 ctx.fillStyle="#111";
 ctx.fillRect(0,canvas.height-60,canvas.width,60);

 player.vy+=player.gravity;
 player.y+=player.vy;
 if(player.y+player.h>=canvas.height-60){
  player.y=canvas.height-60-player.h;
  player.vy=0;player.onGround=true;
 }
 ctx.fillStyle="#b400ff";
 ctx.fillRect(player.x,player.y,player.w,player.h);

 if(frame%120===0){
  obstacles.push({x:canvas.width,y:canvas.height-110,w:40,h:50});
 }
 obstacles.forEach((o,i)=>{
  o.x-=speed;
  ctx.fillStyle="#ff0055";
  ctx.fillRect(o.x,o.y,o.w,o.h);
  if(player.x<o.x+o.w&&player.x+player.w>o.x&&
     player.y<o.y+o.h&&player.y+player.h>o.y){
    endGame();
  }
  if(o.x+o.w<0) obstacles.splice(i,1);
 });

 frame++;score++;
 if(score%1200===0){
  phase++;speed++;
  document.getElementById("phase").innerText=phase;
  loadMusic();
 }

 requestAnimationFrame(loop);
}

/* AUDIO */
function loadMusic(){
 music.src=tracks[(phase-1)%tracks.length];
 music.volume=.5;music.play();
}

/* START */
startBtn.onclick=()=>{
 menu.style.display="none";
 player.y=canvas.height-110;
 running=true;loadMusic();loop();
};

/* GAME OVER */
function endGame(){
 running=false;
 if(score>record) localStorage.setItem("blackmoonRecord",score);
 alert("ðŸŒ™ El aire te soltÃ³â€¦ vuelve a intentarlo");
 location.reload();
}
</script>

</body>
</html>
