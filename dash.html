<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aerial Dash ‚Äì Black Moon Premium</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;}

body{
    background:#000;
    overflow:hidden;
    color:white;
}

/* ---------- GLASS + NEBLINA ---------- */
#fog{
    position:absolute;
    inset:0;
    background:url("neblina.png");
    opacity:0.2;
    pointer-events:none;
    animation:fogMove 60s linear infinite;
}
@keyframes fogMove{
    from{background-position:0 0;}
    to{background-position:2000px 0;}
}

/* ---------- MENU ---------- */
#menu{
    position:absolute;
    inset:0;
    background:linear-gradient(to top,#000,#12002b);
    backdrop-filter:blur(10px);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:10;
}

#menu h1{
    font-size:2.5rem;
    margin-bottom:20px;
}

#menu button{
    padding:15px 50px;
    border:none;
    border-radius:30px;
    background:linear-gradient(45deg,#7f00ff,#c77dff);
    color:white;
    font-size:1.2rem;
}

/* ---------- HUD ---------- */
#hud{
    position:absolute;
    top:10px;
    left:10px;
    background:rgba(0,0,0,0.4);
    padding:10px 15px;
    border-radius:15px;
    backdrop-filter:blur(6px);
}

/* ---------- CANVAS ---------- */
canvas{display:block;}

/* ---------- BOT√ìN SALTO ---------- */
#jumpBtn{
    position:absolute;
    bottom:90px;
    right:20px;
    width:80px;
    height:80px;
    border-radius:50%;
    background:rgba(127,0,255,0.7);
    border:none;
    color:white;
    font-size:1rem;
}

/* ---------- FOOTER ---------- */
footer{
    position:absolute;
    bottom:0;
    width:100%;
    height:50px;
    background:linear-gradient(to right,#000,#3a3a3a,#7f00ff,#000);
    display:flex;
    justify-content:space-around;
    align-items:center;
    backdrop-filter:blur(8px);
}

footer a{color:white;text-decoration:none;font-size:0.85rem;}
</style>
</head>

<body>

<div id="menu">
    <h1>üåô Aerial Dash</h1>
    <button onclick="startGame()">JUGAR</button>
</div>

<div id="fog"></div>

<div id="hud">
    Nivel: <span id="level">1</span><br>
    R√©cord: <span id="record">0</span>
</div>

<canvas id="canvas"></canvas>
<button id="jumpBtn">SALTO</button>

<footer>
    <a href="#">Podcast</a>
    <a href="#">Escuela</a>
    <a href="#">Tienda</a>
    <a href="#">Black Moon</a>
</footer>

<!-- ---------- AUDIO POR NIVELES ---------- -->
<audio id="music" loop></audio>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ---------- IM√ÅGENES EDITABLES ---------- */
const dancer = new Image();
dancer.src = "bailarina.png";

const tela = new Image();
tela.src = "tela.png"; // obst√°culos reales

const moon = new Image();
moon.src = "luna.png";

const sun = new Image();
sun.src = "sol.png";

/* ---------- JUGADOR ---------- */
let player = {
    x:80,y:canvas.height-180,w:50,h:50,
    vy:0,jump:-18,gravity:0.9,onGround:false
};

/* ---------- ESTADO ---------- */
let obstacles=[];
let frame=0;
let speed=6;
let level=1;
let score=0;
let record=localStorage.getItem("aerialRecord") || 0;

document.getElementById("record").innerText = record;

/* ---------- M√öSICA POR NIVEL ---------- */
const tracks=[
    "nivel1.mp3",
    "nivel2.mp3",
    "nivel3.mp3"
];

function loadMusic(){
    const music=document.getElementById("music");
    music.src=tracks[(level-1)%tracks.length];
    music.play();
}

/* ---------- CONTROLES ---------- */
function jump(){
    if(player.onGround){
        player.vy=player.jump;
        player.onGround=false;
        spawnParticles();
    }
}
document.addEventListener("click",jump);
document.getElementById("jumpBtn").addEventListener("click",jump);

/* ---------- PART√çCULAS BLACK MOON ---------- */
let particles=[];
function spawnParticles(){
    for(let i=0;i<10;i++){
        particles.push({
            x:player.x+25,
            y:player.y+25,
            vx:(Math.random()-0.5)*5,
            vy:(Math.random()-0.5)*5,
            life:30
        });
    }
}

/* ---------- LOOP ---------- */
function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    /* D√≠a / Noche */
    ctx.fillStyle = level%2===0 ? "#87ceeb" : "#0b0020";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.drawImage(level%2===0?sun:moon,canvas.width-100,20,70,70);

    /* Jugador */
    player.vy+=player.gravity;
    player.y+=player.vy;

    if(player.y+player.h>=canvas.height-80){
        player.y=canvas.height-80-player.h;
        player.vy=0;
        player.onGround=true;
    }

    ctx.drawImage(dancer,player.x,player.y,player.w,player.h);

    /* Obst√°culos (TELAS) */
    if(frame%120===0){
        obstacles.push({x:canvas.width,y:canvas.height-120,w:60,h:80});
    }

    obstacles.forEach((o,i)=>{
        o.x-=speed;
        ctx.drawImage(tela,o.x,o.y,o.w,o.h);

        if(player.x<o.x+o.w && player.x+player.w>o.x &&
           player.y<o.y+o.h && player.y+player.h>o.y){
            endGame();
        }

        if(o.x+o.w<0) obstacles.splice(i,1);
    });

    /* Part√≠culas */
    particles.forEach((p,i)=>{
        ctx.fillStyle="rgba(180,0,255,0.8)";
        ctx.beginPath();
        ctx.arc(p.x,p.y,3,0,Math.PI*2);
        ctx.fill();
        p.x+=p.vx; p.y+=p.vy; p.life--;
        if(p.life<=0) particles.splice(i,1);
    });

    frame++;
    score++;

    /* SUBIR NIVEL */
    if(score%1000===0){
        level++;
        speed+=1;
        document.getElementById("level").innerText=level;
        loadMusic();
    }

    requestAnimationFrame(loop);
}

/* ---------- FIN ---------- */
function endGame(){
    if(score>record){
        localStorage.setItem("aerialRecord",score);
    }
    alert("üí• Ca√≠ste del aire");
    location.reload();
}

/* ---------- START ---------- */
function startGame(){
    document.getElementById("menu").style.display="none";
    loadMusic();
    loop();
}
</script>

</body>
</html>

