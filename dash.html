<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Moon Test</title>

<style>
body{
  margin:0;
  background:#111;
  color:white;
  font-family:Arial;
  overflow:hidden;
}

#menu{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10;
}

button{
  padding:15px 30px;
  font-size:18px;
}

#hud{
  position:fixed;
  top:10px;
  left:10px;
}

#controls{
  position:fixed;
  bottom:20px;
  right:20px;
  display:flex;
  gap:10px;
}

.ctrl{
  width:70px;
  height:70px;
  border-radius:50%;
  font-size:20px;
}
</style>
</head>

<body>

<div id="menu">
  <button id="start">INICIAR</button>
</div>

<div id="hud">JUGANDO…</div>

<canvas id="game"></canvas>

<div id="controls">
  <button class="ctrl" id="left">⬅️</button>
  <button class="ctrl" id="jump">⬆️</button>
  <button class="ctrl" id="right">➡️</button>
</div>

<script>
/* ===== DOM ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const menu = document.getElementById("menu");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ===== JUGADOR ===== */
let player = {
  x:100,
  y:0,
  w:40,
  h:40,
  vy:0,
  gravity:0.8,
  jump:-15,
  onGround:false
};

let running = false;
let moveL = false;
let moveR = false;

/* ===== CONTROLES ===== */
document.getElementById("left").onpointerdown = ()=>moveL=true;
document.getElementById("left").onpointerup = ()=>moveL=false;
document.getElementById("right").onpointerdown = ()=>moveR=true;
document.getElementById("right").onpointerup = ()=>moveR=false;
document.getElementById("jump").onclick = ()=>{
  if(player.onGround){
    player.vy = player.jump;
    player.onGround = false;
  }
};

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") moveL=true;
  if(e.key==="ArrowRight") moveR=true;
  if(e.key===" "||e.key==="ArrowUp"){
    if(player.onGround){
      player.vy = player.jump;
      player.onGround=false;
    }
  }
});
document.addEventListener("keyup",e=>{
  if(e.key==="ArrowLeft") moveL=false;
  if(e.key==="ArrowRight") moveR=false;
});

/* ===== LOOP ===== */
function loop(){
  if(!running) return;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  // fondo
  ctx.fillStyle="#222";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // suelo
  ctx.fillStyle="#000";
  ctx.fillRect(0,canvas.height-50,canvas.width,50);

  // movimiento lateral
  if(moveL) player.x -= 5;
  if(moveR) player.x += 5;

  // física
  player.vy += player.gravity;
  player.y += player.vy;

  if(player.y + player.h >= canvas.height-50){
    player.y = canvas.height-50-player.h;
    player.vy = 0;
    player.onGround = true;
  }

  // jugador
  ctx.fillStyle="#b400ff";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  requestAnimationFrame(loop);
}

/* ===== START ===== */
document.getElementById("start").onclick = ()=>{
  menu.style.display="none";
  player.y = canvas.height-90;
  running = true;
  loop();
};
</script>

</body>
</html>
