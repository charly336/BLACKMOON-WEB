<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Moon Aerial Dash</title>

<style>
/* ================== CONFIG DEV (SOLO DESARROLLADOR) ================== */
:root{
  --fondo: url("https://i.imgur.com/4NJl8dY.png"); /* Nubes / Luna / Sol / Monta√±as */
  --personaje: url("https://i.imgur.com/Xn4KJ4B.png"); /* Isis Moon */
  --obstaculo: url("https://i.imgur.com/9R4Fz1u.png"); /* Tela a√©rea */
}
/* ===================================================================== */

body{
  margin:0;
  overflow:hidden;
  background:#000;
  font-family: Arial, sans-serif;
}

#game{
  position:relative;
  width:100vw;
  height:100vh;
  background-image:var(--fondo);
  background-size:cover;
  background-position:center;
}

/* PERSONAJE */
#player{
  position:absolute;
  bottom:80px;
  left:120px;
  width:60px;
  height:60px;
  background-image:var(--personaje);
  background-size:contain;
  background-repeat:no-repeat;
}

/* OBST√ÅCULOS (TELAS) */
.obstacle{
  position:absolute;
  bottom:80px;
  width:35px;
  height:60px;
  background-image:var(--obstaculo);
  background-size:contain;
  background-repeat:no-repeat;
}

/* HUD */
#hud{
  position:absolute;
  top:10px;
  left:10px;
  color:#fff;
  font-size:18px;
  z-index:10;
}

/* BOTONES */
#controls{
  position:absolute;
  bottom:20px;
  width:100%;
  display:flex;
  justify-content:center;
  gap:30px;
  z-index:10;
}

.control-btn{
  width:70px;
  height:70px;
  border-radius:50%;
  border:none;
  background:rgba(255,255,255,0.2);
  color:#fff;
  font-size:30px;
  backdrop-filter: blur(6px);
}

footer{
  position:absolute;
  bottom:0;
  width:100%;
  background:rgba(0,0,0,0.5);
  display:flex;
  justify-content:space-around;
  padding:10px;
}

footer a{
  color:#fff;
  text-decoration:none;
  font-size:14px;
}
</style>
</head>

<body>

<div id="game">
  <div id="hud">Obst√°culos superados: <span id="score">0</span></div>

  <div id="player"></div>

  <div id="controls">
    <button class="control-btn" id="left">‚¨ÖÔ∏è</button>
    <button class="control-btn" id="right">‚û°Ô∏è</button>
  </div>

  <footer>
    <a href="#">Podcast</a>
    <a href="#">Escuela</a>
    <a href="#">Records</a>
    <a href="#">Tienda</a>
  </footer>
</div>

<audio id="music" src="https://cdn.pixabay.com/audio/2022/10/19/audio_9466fae6d2.mp3" loop autoplay></audio>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");

let y = 0;
let velocity = 0;
let gravity = -0.8;
let jumping = false;
let obstacles = [];
let score = 0;
let speed = 6;

/* MOVIMIENTO */
function jump(){
  if(!jumping){
    velocity = 15;
    jumping = true;
  }
}

/* CONTROLES */
document.getElementById("left").onclick = jump;
document.getElementById("right").onclick = jump;

document.addEventListener("keydown", e=>{
  if(e.code === "Space" || e.code === "ArrowUp"){
    jump();
  }
});

/* CREAR OBST√ÅCULOS */
function createObstacle(){
  const obs = document.createElement("div");
  obs.className = "obstacle";
  obs.style.left = window.innerWidth + "px";
  game.appendChild(obs);
  obstacles.push(obs);
}

/* LOOP PRINCIPAL */
function update(){
  velocity += gravity;
  y += velocity;

  if(y <= 0){
    y = 0;
    velocity = 0;
    jumping = false;
  }

  player.style.transform = `translateY(${-y}px)`;

  obstacles.forEach((obs, index)=>{
    let x = obs.offsetLeft - speed;
    obs.style.left = x + "px";

    /* COLISI√ìN */
    const pRect = player.getBoundingClientRect();
    const oRect = obs.getBoundingClientRect();

    if(
      pRect.right > oRect.left &&
      pRect.left < oRect.right &&
      pRect.bottom > oRect.top &&
      pRect.top < oRect.bottom
    ){
      alert("üí• Ca√≠ste de la tela a√©rea");
      location.reload();
    }

    if(x < -50){
      obs.remove();
      obstacles.splice(index,1);
      score++;
      scoreEl.textContent = score;
    }
  });

  requestAnimationFrame(update);
}

/* SPAWN OBST√ÅCULOS */
setInterval(createObstacle, 1800);

/* INICIAR */
update();
</script>

</body>
</html>
