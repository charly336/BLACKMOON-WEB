<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aerial Flap</title>

<style>
    :root {
        --glass: rgba(255, 255, 255, 0.12);
    }

    body {
        margin: 0;
        background: #000;
        overflow: hidden;
        font-family: Arial, sans-serif;
        user-select: none;
    }

    #gameCanvas {
        display: block;
        margin: 0 auto;
        background: linear-gradient(180deg, #01010d 0%, #000 100%);
        border-bottom: 2px solid #5900ff;
    }

    /* Botones Glass */
    .glassBtn {
        position: absolute;
        padding: 18px 40px;
        font-size: 22px;
        border-radius: 18px;
        background: var(--glass);
        color: #fff;
        border: 1px solid rgba(255,255,255,0.25);
        backdrop-filter: blur(10px);
        cursor: pointer;
        left: 50%;
        top: 70%;
        transform: translateX(-50%);
        transition: 0.2s;
        text-shadow: 0 0 8px #a020f0;
    }

    .glassBtn:hover {
        background: rgba(255,255,255,0.20);
        transform: translateX(-50%) scale(1.05);
    }

    #menu {
        position: absolute;
        width: 100%;
        height: 100%;
        background: rgba(10, 0, 20, 0.85);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(8px);
        z-index: 10;
    }

    #menu h1 {
        font-size: 50px;
        color: white;
        text-shadow: 0 0 25px #9b4dff;
        margin-bottom: 60px;
    }

    #score {
        position: fixed;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 32px;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 0 15px #a020f0;
        z-index: 10;
    }
</style>
</head>
<body>

<div id="menu">
    <h1>Aerial Flap</h1>
    <button id="startBtn" class="glassBtn">Iniciar</button>
</div>

<canvas id="gameCanvas"></canvas>
<div id="score">0</div>

<script>
/* ---------- CANVAS RESPONSIVE ---------- */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

/* ---------- IMÁGENES ---------- */
let birdImg = new Image();
birdImg.src = "bailarina.png";

// *AQUÍ ESTÁ EL CAMBIO QUE PEDISTE*
let pillarImg = new Image();
pillarImg.src = "tela 2.png";  // ← Ruta EXACTA nueva

let moonImg = new Image();
moonImg.src = "luna.png"; // Luna decorativa en movimiento

/* ---------- VARIABLES DEL JUEGO ---------- */
let birdX = 80;
let birdY = 200;
let gravity = 0.45;
let velocity = 0;
let pillars = [];
let moonX = 0;

let playing = false;
let score = 0;

/* NIVEL AUTOMÁTICO */
let levelSpeed = 2;  
let levelTimer = 0;

/* ---------- BOTÓN ---------- */
document.getElementById("startBtn").onclick = startGame;
canvas.addEventListener("mousedown", flap);
canvas.addEventListener("touchstart", flap);

/* ---------- FUNCIONES PRINCIPALES ---------- */
function flap() {
    if (!playing) return;
    velocity = -8;
}

function startGame() {
    playing = true;
    score = 0;
    birdY = canvas.height / 2;
    velocity = 0;
    pillars = [];
    levelSpeed = 2;
    levelTimer = 0;

    document.getElementById("score").textContent = score;
    document.getElementById("menu").style.display = "none";

    loop();
}

/* ---------- DIBUJO DE LUNA ANIMADA ---------- */
function drawMoon() {
    moonX += 0.2;
    if (moonX > canvas.width + 200) moonX = -200;

    ctx.drawImage(moonImg, moonX, 50, 150, 150);
}

/* ---------- CREACIÓN DE PILARES ---------- */
function spawnPillar() {
    let gap = canvas.height * 0.27;
    let topHeight = Math.random() * (canvas.height * 0.45) + 50;

    pillars.push({
        x: canvas.width,
        top: topHeight,
        bottom: topHeight + gap,
        width: 120
    });
}

function drawPillars() {
    pillars.forEach(p => {
        p.x -= levelSpeed;

        ctx.drawImage(pillarImg, p.x, 0, p.width, p.top);
        ctx.drawImage(pillarImg, p.x, p.bottom, p.width, canvas.height - p.bottom);
    });
}

/* ---------- DIBUJO DEL PERSONAJE ---------- */
function drawBird() {
    ctx.drawImage(birdImg, birdX, birdY, 90, 90);
}

/* ---------- COLISIONES ---------- */
function checkCollision() {
    for (let p of pillars) {
        if (
            birdX + 70 > p.x &&
            birdX < p.x + p.width &&
            (birdY < p.top || birdY + 70 > p.bottom)
        ) {
            gameOver();
        }
    }

    if (birdY <= 0 || birdY >= canvas.height) {
        gameOver();
    }
}

/* ---------- SCORE & NIVELES ---------- */
function updateScore() {
    pillars.forEach(p => {
        if (p.x + p.width === birdX) {
            score++;
            document.getElementById("score").textContent = score;
        }
    });
}

/* ---------- AUMENTO DE DIFICULTAD ---------- */
function updateDifficulty() {
    levelTimer++;

    if (levelTimer % 500 === 0) {
        levelSpeed += 0.5;
    }
}

/* ---------- GAME OVER ---------- */
function gameOver() {
    playing = false;

    document.getElementById("menu").style.display = "flex";
    document.getElementById("startBtn").textContent = "Reiniciar";
}

/* ---------- LOOP PRINCIPAL ---------- */
function loop() {
    if (!playing) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawMoon();

    velocity += gravity;
    birdY += velocity;

    drawBird();

    if (pillars.length === 0 || pillars[pillars.length - 1].x < canvas.width * 0.65) {
        spawnPillar();
    }

    drawPillars();
    checkCollision();
    updateScore();
    updateDifficulty();

    requestAnimationFrame(loop);
}
</script>

</body>
</html>


