<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Danza A√©rea D√≠a y Noche</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: black; color: white; font-family: Arial, sans-serif; }
  canvas { display: block; margin: 0 auto; border: 3px solid #fff; }
  #ui {
    text-align: center;
    margin-top: 10px;
  }
  button {
    background: #222; color: white; border: 2px solid white;
    border-radius: 10px; padding: 8px 12px; margin: 5px; cursor: pointer;
  }
  button:hover { background: #444; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<div id="ui">
  <p>Puntuaci√≥n: <span id="score">0</span> | R√©cord: <span id="record">0</span></p>
  <button id="volDown">üîâ -</button>
  <button id="pauseMusic">‚è∏Ô∏è</button>
  <button id="volUp">üîä +</button>
</div>

<script>
// ====================== üé® CONFIGURACI√ìN PERSONALIZABLE ======================

// üéµ M√öSICA PERSONALIZABLE
// üëâ Cambia las rutas de las canciones aqu√≠:
let tracks = [
  "musica1.mp3", // Canci√≥n 1
  "musica2.mp3", // Canci√≥n 2
  "musica3.mp3", // Canci√≥n 3
  "musica4.mp3"  // Canci√≥n 4
];

// üåÑ IM√ÅGENES PERSONALIZABLES DEL ESCENARIO
// üëâ Cambia las rutas por tus propias im√°genes (PNG, JPG, etc.)
const imgMonta√±as = new Image();
imgMonta√±as.src = "montanas.png"; // Monta√±as personalizables

const imgNubes = new Image();
imgNubes.src = "nubes.png"; // Nubes personalizables

// ‚òÄÔ∏èüåô IM√ÅGENES DEL SOL Y LA LUNA
const imgSol = new Image();
imgSol.src = "sol.png"; // Sol personalizable

const imgLuna = new Image();
imgLuna.src = "luna.png"; // Luna personalizable

// ============================================================================

// VARIABLES DE JUEGO
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = { x: 100, y: 300, size: 40, vy: 0, gravity: 0.5, jump: -10 };
let obstacles = [];
let score = 0;
let record = localStorage.getItem("recordAerea") || 0;
document.getElementById("record").textContent = record;
let gameSpeed = 4;
let gameOver = false;
let isDay = false;

// üéµ M√öSICA
let currentTrack = 0;
let audio = new Audio(tracks[currentTrack]);
audio.volume = 0.5;
audio.loop = true;
audio.play();

document.getElementById("volUp").onclick = () => { audio.volume = Math.min(audio.volume + 0.1, 1); };
document.getElementById("volDown").onclick = () => { audio.volume = Math.max(audio.volume - 0.1, 0); };
document.getElementById("pauseMusic").onclick = () => { audio.paused ? audio.play() : audio.pause(); };

function changeTrack() {
  currentTrack = (currentTrack + 1) % tracks.length;
  audio.src = tracks[currentTrack];
  audio.play();
}

// FONDO
const bgStars = [];
for (let i = 0; i < 80; i++) {
  bgStars.push({ x: Math.random() * canvas.width, y: Math.random() * 200, size: Math.random() * 2 });
}
let clouds = Array(3).fill().map(() => ({ x: Math.random() * canvas.width, y: Math.random() * 100 }));

function drawBackground() {
  // D√≠a o noche seg√∫n el estado
  if (isDay) {
    // üåû D√çA
    let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
    grad.addColorStop(0, "#66ccff");
    grad.addColorStop(1, "#f0e68c");
    ctx.fillStyle = grad;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Sol
    ctx.drawImage(imgSol, 650, 50, 80, 80);
  } else {
    // üåô NOCHE
    let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
    grad.addColorStop(0, "#0b0b33");
    grad.addColorStop(1, "#2b0033");
    ctx.fillStyle = grad;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Estrellas
    ctx.fillStyle = "white";
    bgStars.forEach(s => ctx.fillRect(s.x, s.y, s.size, s.size));

    // Luna
    ctx.drawImage(imgLuna, 650, 50, 70, 70);
  }

  // Nubes personalizables
  clouds.forEach(cloud => {
    ctx.drawImage(imgNubes, cloud.x, cloud.y, 120, 60);
    cloud.x -= 0.3;
    if (cloud.x < -120) cloud.x = canvas.width + Math.random() * 100;
  });

  // Monta√±as personalizables
  ctx.drawImage(imgMonta√±as, 0, 250, canvas.width, 150);
}

// JUGADORA
function drawPlayer() {
  ctx.fillStyle = "#f5a9e1";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.size / 2, 0, Math.PI * 2);
  ctx.fill();
}

// OBST√ÅCULOS
function createObstacle() {
  let height = Math.random() * 100 + 50;
  obstacles.push({ x: canvas.width, y: canvas.height - height, width: 40, height });
}

function drawObstacles() {
  ctx.fillStyle = "#d2b48c";
  obstacles.forEach(obs => {
    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
    obs.x -= gameSpeed;
  });
  obstacles = obstacles.filter(o => o.x + o.width > 0);
}

// CONTROL
document.addEventListener("keydown", e => {
  if (e.code === "Space" && player.y >= 300) player.vy = player.jump;
});

// COLISI√ìN
function detectCollision() {
  for (let obs of obstacles) {
    if (
      player.x + player.size / 2 > obs.x &&
      player.x - player.size / 2 < obs.x + obs.width &&
      player.y + player.size / 2 > obs.y
    ) {
      gameOver = true;
    }
  }
}

// PUNTOS Y CICLOS DE M√öSICA / D√çA-NOCHE
function updateScore() {
  score++;
  document.getElementById("score").textContent = score;

  if (score % 5000 === 0) changeTrack();
  if (score % 6000 === 0) isDay = !isDay;
}

// LOOP PRINCIPAL
let frame = 0;
function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.fillText("Fin del juego", 300, 200);
    if (score > record) {
      localStorage.setItem("recordAerea", score);
      document.getElementById("record").textContent = score;
    }
    return;
  }

  drawBackground();
  drawPlayer();
  drawObstacles();
  detectCollision();

  player.vy += player.gravity;
  player.y += player.vy;
  if (player.y > 300) player.y = 300;

  if (frame % 100 === 0) createObstacle();
  updateScore();

  frame++;
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
