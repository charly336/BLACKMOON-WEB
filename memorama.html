<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>2048 Ilimited - Black Moon</title>

<style>
:root{
  --bg:#0f1724;
  --card:#0b1220;
  --accent:#f59e0b;
}

*{box-sizing:border-box;}

html, body{
  margin:0;
  padding:0;
  height:100%;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
  background:linear-gradient(180deg,#071021 0%,#0a2345 50%,#131f3b 100%);
  color:#fff;

  /* ðŸ”’ BLOQUEO DE SCROLL */
  overflow:hidden;
  position:fixed;
  width:100%;
  overscroll-behavior:none;
  touch-action:none;
}

.container{
  max-width:920px;
  margin:auto;
  padding:14px;
  padding-bottom:90px; /* espacio para footer */
}

.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.title{
  font-size:22px;
  font-weight:700;
}

.controls{
  display:flex;
  gap:10px;
}

.btn{
  padding:8px 12px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,0.1);
  color:#fff;
  cursor:pointer;
}

.scoreBox{
  background:rgba(255,255,255,0.08);
  padding:6px 10px;
  border-radius:8px;
  text-align:center;
  font-size:12px;
}

.gridWrap{
  margin-top:14px;
  display:grid;
  grid-template-columns:1fr 320px;
  gap:14px;
}

.gameArea{
  width:100%;
  max-width:360px;
  margin:auto;
  aspect-ratio:1/1;
  background:rgba(255,255,255,0.04);
  border-radius:12px;
  padding:10px;
  touch-action:none;
}

.board{
  width:100%;
  height:100%;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  grid-template-rows:repeat(4,1fr);
  gap:8px;
}

.cell{
  background:rgba(255,255,255,0.08);
  border-radius:8px;
  position:relative;
}

.tile{
  position:absolute;
  inset:0;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:700;
  background:linear-gradient(145deg,#7c3aed,#ec4899);
}

.sidePanel{
  background:rgba(255,255,255,0.05);
  border-radius:12px;
  padding:10px;
  font-size:13px;
  opacity:.85;
}

/* ðŸ¦¶ FOOTER */
.footer{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:70px;
  background:rgba(10,15,35,0.95);
  backdrop-filter:blur(8px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid rgba(255,255,255,0.1);
}

.footer a{
  color:#fff;
  text-decoration:none;
  font-size:12px;
  text-align:center;
  opacity:.85;
}

.footer a:hover{
  opacity:1;
}

.footer span{
  display:block;
  font-size:18px;
}

@media(max-width:768px){
  .gridWrap{
    grid-template-columns:1fr;
  }
}
</style>
</head>

<body>

<div class="container">
  <div class="header">
    <div class="title">2048 ILIMITED - Black Moon</div>
    <div class="controls">
      <div class="scoreBox">
        <div>Score</div>
        <div id="score">0</div>
      </div>
      <button class="btn" id="newBtn">Nuevo</button>
    </div>
  </div>

  <div class="gridWrap">
    <div class="gameArea">
      <div id="board" class="board"></div>
    </div>

    <aside class="sidePanel">
      Desliza para jugar ðŸ“±<br>
      Optimizado para mÃ³vil<br>
      Black Moon Games ðŸŒ™
    </aside>
  </div>
</div>

<!-- ðŸ¦¶ FOOTER CON 4 LINKS -->
<footer class="footer">
  <a href="https://open.spotify.com" target="_blank">
    <span>ðŸŽ§</span>
    Podcast
  </a>
  <a href="https://charly336.github.io/BLACKMOON-WEB/" target="_blank">
    <span>ðŸŽ®</span>
    Juegos
  </a>
  <a href="https://instagram.com" target="_blank">
    <span>ðŸ“¸</span>
    Instagram
  </a>
  <a href="https://wa.me/" target="_blank">
    <span>ðŸ’¬</span>
    Contacto
  </a>
</footer>

<script>
const size = 4;
let board = [];
let score = 0;

const boardEl = document.getElementById("board");
const scoreEl = document.getElementById("score");
const newBtn = document.getElementById("newBtn");

function init(){
  board = Array.from({length:size},()=>Array(size).fill(0));
  score = 0;
  spawn(); spawn();
  render();
}

function spawn(){
  const empty=[];
  for(let r=0;r<size;r++)
    for(let c=0;c<size;c++)
      if(board[r][c]===0) empty.push([r,c]);

  if(!empty.length) return;
  const [r,c]=empty[Math.floor(Math.random()*empty.length)];
  board[r][c]=2;
}

function render(){
  boardEl.innerHTML="";
  scoreEl.textContent=score;

  for(let r=0;r<size;r++){
    for(let c=0;c<size;c++){
      const cell=document.createElement("div");
      cell.className="cell";
      boardEl.appendChild(cell);

      if(board[r][c]){
        const tile=document.createElement("div");
        tile.className="tile";
        tile.textContent=board[r][c];
        cell.appendChild(tile);
      }
    }
  }
}

function move(dir){
  let moved=false;
  const dx={left:-1,right:1,up:0,down:0}[dir];
  const dy={up:-1,down:1,left:0,right:0}[dir];
  const range=[...Array(size).keys()];
  if(dir==="right"||dir==="down") range.reverse();

  for(let y of range){
    for(let x of range){
      let r=y,c=x;
      if(!board[r][c]) continue;

      let nr=r+dy,nc=c+dx;
      while(nr>=0&&nr<size&&nc>=0&&nc<size&&board[nr][nc]===0){
        board[nr][nc]=board[r][c];
        board[r][c]=0;
        r=nr;c=nc;
        nr+=dy;nc+=dx;
        moved=true;
      }
    }
  }
  if(moved){ spawn(); render(); }
}

/* ðŸ“± TOUCH */
let startX=null,startY=null;

boardEl.addEventListener("touchstart",e=>{
  e.preventDefault();
  const t=e.touches[0];
  startX=t.clientX;
  startY=t.clientY;
},{passive:false});

boardEl.addEventListener("touchend",e=>{
  e.preventDefault();
  if(startX===null) return;
  const t=e.changedTouches[0];
  const dx=t.clientX-startX;
  const dy=t.clientY-startY;

  if(Math.abs(dx)<30 && Math.abs(dy)<30) return;

  Math.abs(dx)>Math.abs(dy)
    ? move(dx>0?"right":"left")
    : move(dy>0?"down":"up");

  startX=null; startY=null;
},{passive:false});

/* âŒ¨ï¸ */
window.addEventListener("keydown",e=>{
  const m={37:"left",38:"up",39:"right",40:"down"};
  if(m[e.keyCode]) move(m[e.keyCode]);
});

newBtn.onclick=init;
init();
</script>

</body>
</html>

