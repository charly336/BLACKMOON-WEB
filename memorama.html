<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solitario Spider</title>
<style>
  body {
    margin: 0;
    background-image: url('fondo.jpg'); /* üîß CAMBIAR FONDO AQU√ç */
    background-size: cover;
    font-family: 'Segoe UI', sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    background: rgba(0, 0, 0, 0.6);
    color: white;
    text-align: center;
    padding: 10px;
  }

  #game-area {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    background: rgba(255,255,255,0.15);
    border: 2px solid #333;
    margin: 10px;
    padding-top: 30px;
    position: relative;
  }

  .column {
    width: 90px;
    min-height: 400px;
    border: 1px dashed rgba(255,255,255,0.4);
    margin: 0 5px;
    position: relative;
  }

  .card {
    width: 80px;
    height: 110px;
    position: absolute;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
    cursor: grab;
    transition: transform 0.2s;
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px black;
  }

  .card.dragging {
    opacity: 0.7;
    transform: scale(1.05);
  }

  #controls {
    text-align: center;
    margin: 10px;
  }

  button {
    margin: 5px;
    padding: 8px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background-color: #444;
    color: white;
    transition: 0.3s;
  }

  button:hover {
    background-color: #666;
  }

  footer {
    background: rgba(0,0,0,0.8);
    color: white;
    text-align: center;
    padding: 10px;
  }

  footer img {
    height: 40px;
    vertical-align: middle;
  }

  #dev-panel { display: none; }
</style>
</head>
<body>

<header>
  <h1>üï∏Ô∏è Solitario Spider</h1>
  <p id="level">Nivel: 1 / 50</p>
</header>

<div id="controls">
  <button id="btnStart">‚ñ∂Ô∏è Iniciar</button>
  <button id="btnPause">‚è∏Ô∏è Pausa</button>
  <button id="btnPlayMusic">üîä M√∫sica</button>
  <button id="btnMute">üîá Silencio</button>
  <button id="btnVolUp">üîº Volumen</button>
  <button id="btnVolDown">üîΩ Volumen</button>
</div>

<div id="game-area"></div>

<footer>
  <img src="footer-logo.png" alt="Logo">
  <span id="footer-text">"Paciencia es la clave de la victoria"</span>
</footer>

<!-- Audios -->
<audio id="music" src="audio1.mp3" loop></audio>
<audio id="effect1" src="audio2.mp3"></audio>
<audio id="effect2" src="audio3.mp3"></audio>

<div id="dev-panel">
  <h3>Panel de Desarrollador</h3>
  <label>Cambiar fondo: <input type="file" id="bgChange"></label><br>
  <label>Cambiar carta: <input type="file" id="cardChange"></label>
</div>

<script>
const gameArea = document.getElementById('game-area');
const levelText = document.getElementById('level');
const music = document.getElementById('music');
const effect1 = document.getElementById('effect1');
const effect2 = document.getElementById('effect2');
let level = 1;
const maxLevel = 50;
let paused = false;

// üéÆ Crear columnas
const columns = 10;
for (let i = 0; i < columns; i++) {
  const col = document.createElement('div');
  col.classList.add('column');
  gameArea.appendChild(col);
}

// ============================================================
// üÇ° üîß SECCI√ìN DE CAMBIO DE CARTAS Y SUS IM√ÅGENES
// ============================================================
// Aqu√≠ puedes asignar im√°genes personalizadas a cada palo o tipo.
// Puedes cambiar las URLs por tus propias im√°genes.
const cardBackImage = 'carta-dorso.png'; // dorso com√∫n

const cardImages = {
  '‚ô†': 'cartas/spade.png',
  '‚ô•': 'cartas/heart.png',
  '‚ô¶': 'cartas/diamond.png',
  '‚ô£': 'cartas/club.png'
};
// ============================================================


// üÉè Crear una carta visual
function createCard(value, suit) {
  const card = document.createElement('div');
  card.classList.add('card');
  card.dataset.value = value;
  card.dataset.suit = suit;
  card.style.backgroundImage = `url(${cardImages[suit] || cardBackImage})`;
  card.textContent = getCardSymbol(value) + suit;
  card.draggable = true;
  return card;
}

// Convierte n√∫mero a s√≠mbolo visible
function getCardSymbol(value) {
  return {1:'A',11:'J',12:'Q',13:'K'}[value] || value;
}

// üß© Generar mazo y repartir
function startGame() {
  gameArea.querySelectorAll('.column').forEach(col => col.innerHTML = '');
  const deck = createDeck();
  for (let i = 0; i < columns; i++) {
    const col = gameArea.children[i];
    for (let j = 0; j < 5; j++) {
      const card = deck.pop();
      card.style.top = (j * 25) + 'px';
      col.appendChild(card);
    }
  }
  addDragEvents();
}

function createDeck() {
  const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
  const deck = [];
  for (const s of suits) {
    for (let v = 1; v <= 13; v++) {
      const c = createCard(v, s);
      deck.push(c);
    }
  }
  // duplicamos varias veces para simular m√∫ltiples mazos
  return shuffle([...deck, ...deck, ...deck]);
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

// üéØ Drag & Drop con validaci√≥n de secuencia
function addDragEvents() {
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    card.addEventListener('dragstart', e => {
      if (paused) return e.preventDefault();
      card.classList.add('dragging');
      e.dataTransfer.setData('text/plain', JSON.stringify({
        value: card.dataset.value,
        suit: card.dataset.suit
      }));
    });
    card.addEventListener('dragend', () => card.classList.remove('dragging'));
  });

  const cols = document.querySelectorAll('.column');
  cols.forEach(col => {
    col.addEventListener('dragover', e => e.preventDefault());
    col.addEventListener('drop', e => {
      e.preventDefault();
      const draggingCard = document.querySelector('.dragging');
      if (!draggingCard) return;
      const lastCard = col.lastElementChild;
      const draggedValue = parseInt(draggingCard.dataset.value);
      const draggedSuit = draggingCard.dataset.suit;

      // üîç Validar movimiento
      if (!lastCard || 
          (lastCard.dataset.suit === draggedSuit && 
           parseInt(lastCard.dataset.value) === draggedValue + 1)) {
        effect1.play();
        draggingCard.style.top = (col.children.length * 25) + 'px';
        col.appendChild(draggingCard);
        checkWin();
      } else {
        alert("‚ùå Movimiento inv√°lido. Debe ser secuencia descendente del mismo palo.");
      }
    });
  });
}

// üèÜ Revisi√≥n de victoria
function checkWin() {
  const allFull = [...gameArea.children].every(col => col.children.length >= 10);
  if (allFull) nextLevel();
}

// üíØ Cambio de nivel
function nextLevel() {
  effect2.play();
  if (level < maxLevel) {
    level++;
    levelText.textContent = `Nivel: ${level} / ${maxLevel}`;
    alert(`üéâ ¬°Nivel ${level}!`);
    startGame();
  } else {
    alert("üèÅ ¬°Has completado los 50 niveles!");
  }
}

// üéµ Controles
document.getElementById('btnPlayMusic').onclick = () => music.play();
document.getElementById('btnMute').onclick = () => music.pause();
document.getElementById('btnVolUp').onclick = () => music.volume = Math.min(1, music.volume + 0.1);
document.getElementById('btnVolDown').onclick = () => music.volume = Math.max(0, music.volume - 0.1);
document.getElementById('btnStart').onclick = () => { paused = false; startGame(); music.play(); };
document.getElementById('btnPause').onclick = () => { paused = !paused; alert(paused ? '‚è∏Ô∏è Pausa' : '‚ñ∂Ô∏è Reanudar'); };
</script>
</body>
</html>
