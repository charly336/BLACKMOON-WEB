<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memorama Black Moon</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background-color: #006400;
    color: #fff;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  #game-board {
    display: grid;
    justify-content: center;
    gap: 10px;
    margin: 20px auto;
    width: 90%;
    max-width: 900px;
  }
  .card {
    width: 100%;
    aspect-ratio: 1/1;
    background-color: #0a0;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    transition: transform 0.3s;
  }
  .card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px;
  }
  .hidden img {
    display: none;
  }
  #hud {
    margin-top: 10px;
    font-size: 1.2em;
  }
  footer {
    margin-top: 20px;
    font-size: 0.9em;
  }
  a {
    color: #ff0;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
  <div id="hud">
    <span id="score">Puntaje: 0</span> | 
    <span id="timer">Tiempo: 0s</span> | 
    <span id="level">Nivel: 1</span>
  </div>
  <div id="game-board"></div>
  <footer>
    <p>© 2025 Grupo Black Moon | <a href="https://blackmoon.com" target="_blank">Visitar página</a></p>
  </footer>
<script>
// ==================== SECCIÓN DEL DESARROLLADOR ====================
// Cartas personalizadas (22 diferentes)
const DEFAULT_CARDS = [
  "cartas/carta1.png",
  "cartas/carta2.png",
  "cartas/carta3.png",
  "cartas/carta4.png",
  "cartas/carta5.png",
  "cartas/carta6.png",
  "cartas/carta7.png",
  "cartas/carta8.png",
  "cartas/carta9.png",
  "cartas/carta10.png",
  "cartas/carta11.png",
  "cartas/carta12.png",
  "cartas/carta13.png",
  "cartas/carta14.png",
  "cartas/carta15.png",
  "cartas/carta16.png",
  "cartas/carta17.png",
  "cartas/carta18.png",
  "cartas/carta19.png",
  "cartas/carta20.png",
  "cartas/carta21.png",
  "cartas/carta22.png"
];

// Música para cada bloque de 4 niveles
const DEFAULT_TRACKS = [
  "musica/track1.mp3",
  "musica/track2.mp3",
  "musica/track3.mp3",
  "musica/track4.mp3",
  "musica/track5.mp3",
  "musica/track6.mp3",
  "musica/track7.mp3",
  "musica/track8.mp3"
];

// ==================== LÓGICA DEL JUEGO ====================
let level = 1;
let score = 0;
let time = 0;
let timerInterval;
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let pairsFound = 0;
const totalLevels = 30;
const board = document.getElementById('game-board');
const scoreEl = document.getElementById('score');
const timerEl = document.getElementById('timer');
const levelEl = document.getElementById('level');
const audio = new Audio();

function startMusicForLevel(lvl) {
  const index = Math.floor((lvl - 1) / 4) % DEFAULT_TRACKS.length;
  audio.src = DEFAULT_TRACKS[index];
  audio.loop = true;
  audio.play().catch(() => {});
}

function startTimer() {
  clearInterval(timerInterval);
  time = 0;
  timerInterval = setInterval(() => {
    time++;
    timerEl.textContent = `Tiempo: ${time}s`;
  }, 1000);
}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function createBoard() {
  board.innerHTML = '';
  let numPairs = Math.min(22, Math.ceil(level / 1.5) + 4);
  let selected = DEFAULT_CARDS.slice(0, numPairs);
  let cards = shuffle([...selected, ...selected]);

  let cols = Math.ceil(Math.sqrt(cards.length));
  board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

  cards.forEach(src => {
    const card = document.createElement('div');
    card.classList.add('card', 'hidden');
    const img = document.createElement('img');
    img.src = src;
    card.appendChild(img);
    card.addEventListener('click', () => flipCard(card));
    board.appendChild(card);
  });
}

function flipCard(card) {
  if (lockBoard || !card.classList.contains('hidden')) return;
  card.classList.remove('hidden');

  if (!firstCard) {
    firstCard = card;
  } else {
    secondCard = card;
    checkForMatch();
  }
}

function checkForMatch() {
  if (!firstCard || !secondCard) return;
  lockBoard = true;
  const match = firstCard.querySelector('img').src === secondCard.querySelector('img').src;
  if (match) {
    pairsFound++;
    score += 10;
    scoreEl.textContent = `Puntaje: ${score}`;
    resetCards();
    if (pairsFound * 2 === board.children.length) nextLevel();
  } else {
    setTimeout(() => {
      firstCard.classList.add('hidden');
      secondCard.classList.add('hidden');
      resetCards();
    }, 1000);
  }
}

function resetCards() {
  [firstCard, secondCard, lockBoard] = [null, null, false];
}

function nextLevel() {
  clearInterval(timerInterval);
  level++;
  pairsFound = 0;
  if (level > totalLevels) {
    alert(`Juego completado! Puntaje final: ${score}`);
    level = 1;
    score = 0;
  }
  levelEl.textContent = `Nivel: ${level}`;
  startMusicForLevel(level);
  createBoard();
  startTimer();
}

// Iniciar juego
startMusicForLevel(level);
createBoard();
startTimer();
</script>
</body>
</html>
