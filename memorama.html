<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Danza AÃ©rea DÃ­a y Noche</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: black; color: white; font-family: Arial, sans-serif; }
  canvas { display: block; margin: 0 auto; border: 3px solid #fff; background: black; }
  #ui {
    text-align: center;
    margin-top: 10px;
  }
  button {
    background: #222; color: white; border: 2px solid white;
    border-radius: 10px; padding: 8px 12px; margin: 5px; cursor: pointer;
  }
  button:hover { background: #444; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<div id="ui">
  <p>PuntuaciÃ³n: <span id="score">0</span> | RÃ©cord: <span id="record">0</span></p>
  <button id="volDown">ğŸ”‰ -</button>
  <button id="pauseMusic">â¸ï¸</button>
  <button id="volUp">ğŸ”Š +</button>
</div>

<script>
// ====================== ğŸ¨ CONFIGURACIÃ“N PERSONALIZABLE ======================

// ğŸµ MÃšSICA PERSONALIZABLE
let tracks = [
  "musica1.mp3", // CanciÃ³n 1
  "musica2.mp3", // CanciÃ³n 2
  "musica3.mp3", // CanciÃ³n 3
  "musica4.mp3"  // CanciÃ³n 4
];

// ğŸŒ„ ESCENARIO PERSONALIZABLE
const imgMontaÃ±as = new Image();
imgMontaÃ±as.src = "montanas.png"; // MontaÃ±as

const imgNubes = new Image();
imgNubes.src = "nubes.png"; // Nubes

const imgSol = new Image();
imgSol.src = "sol.png"; // Sol

const imgLuna = new Image();
imgLuna.src = "luna.png"; // Luna

// ğŸ’ƒ BAILARINA PERSONALIZABLE
const imgBailarina = new Image();
imgBailarina.src = "bailarina.png"; // Jugadora

// ğŸª¨ OBSTÃCULOS PERSONALIZABLES
const imgObstaculo = new Image();
imgObstaculo.src = "obstaculo.png"; // ObstÃ¡culo

// ============================================================================

// VARIABLES DEL JUEGO
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = { x: 100, y: 300, width: 60, height: 60, vy: 0, gravity: 0.5, jump: -10 };
let obstacles = [];
let score = 0;
let record = localStorage.getItem("recordAerea") || 0;
document.getElementById("record").textContent = record;
let gameSpeed = 4;
let gameOver = false;
let isDay = false;

// ğŸµ MÃšSICA
let currentTrack = 0;
let audio = new Audio(tracks[currentTrack]);
audio.volume = 0.5;
audio.loop = true;
audio.play();

document.getElementById("volUp").onclick = () => { audio.volume = Math.min(audio.volume + 0.1, 1); };
document.getElementById("volDown").onclick = () => { audio.volume = Math.max(audio.volume - 0.1, 0); };
document.getElementById("pauseMusic").onclick = () => { audio.paused ? audio.play() : audio.pause(); };

function changeTrack() {
  currentTrack = (currentTrack + 1) % tracks.length;
  audio.src = tracks[currentTrack];
  audio.play();
}

// ğŸŒŒ CIELO Y ELEMENTOS
const bgStars = [];
for (let i = 0; i < 80; i++) {
  bgStars.push({ x: Math.random() * canvas.width, y: Math.random() * 200, size: Math.random() * 2 });
}
let clouds = Array(3).fill().map(() => ({ x: Math.random() * canvas.width, y: Math.random() * 100 }));

function drawBackground() {
  if (isDay) {
    // â˜€ï¸ DÃA
    let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
    grad.addColorStop(0, "#66ccff");
    grad.addColorStop(1, "#f0e68c");
    ctx.fillStyle = grad;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(imgSol, 650, 50, 80, 80);
  } else {
    // ğŸŒ™ NOCHE
    let grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
    grad.addColorStop(0, "#0b0b33");
    grad.addColorStop(1, "#2b0033");
    ctx.fillStyle = grad;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "white";
    bgStars.forEach(s => ctx.fillRect(s.x, s.y, s.size, s.size));
    ctx.drawImage(imgLuna, 650, 50, 70, 70);
  }

  // â˜ï¸ NUBES
  clouds.forEach(cloud => {
    ctx.drawImage(imgNubes, cloud.x, cloud.y, 120, 60);
    cloud.x -= 0.3;
    if (cloud.x < -120) cloud.x = canvas.width + Math.random() * 100;
  });

  // ğŸ”ï¸ MONTAÃ‘AS
  ctx.drawImage(imgMontaÃ±as, 0, 250, canvas.width, 150);
}

// ğŸ’ƒ JUGADORA
function drawPlayer() {
  ctx.drawImage(imgBailarina, player.x, player.y - player.height, player.width, player.height);
}

// ğŸª¨ OBSTÃCULOS
function createObstacle() {
  let height = Math.random() * 100 + 50;
  obstacles.push({ x: canvas.width, y: canvas.height - height, width: 50, height });
}

function drawObstacles() {
  obstacles.forEach(obs => {
    ctx.drawImage(imgObstaculo, obs.x, obs.y, obs.width, obs.height);
    obs.x -= gameSpeed;
  });
  obstacles = obstacles.filter(o => o.x + o.width > 0);
}

// ğŸ® CONTROL
document.addEventListener("keydown", e => {
  if (e.code === "Space" && player.y >= 300) player.vy = player.jump;
});

// ğŸ’¥ COLISIÃ“N
function detectCollision() {
  for (let obs of obstacles) {
    if (
      player.x < obs.x + obs.width &&
      player.x + player.width > obs.x &&
      player.y > obs.y - player.height
    ) {
      gameOver = true;
    }
  }
}

// ğŸ§® PUNTUACIÃ“N
function updateScore() {
  score++;
  document.getElementById("score").textContent = score;

  if (score % 5000 === 0) changeTrack();
  if (score % 6000 === 0) isDay = !isDay;
}

// ğŸ” LOOP PRINCIPAL
let frame = 0;
function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = "white";
    ctx.font = "40px Arial";
    ctx.fillText("Fin del juego", 300, 200);
    if (score > record) {
      localStorage.setItem("recordAerea", score);
      document.getElementById("record").textContent = score;
    }
    return;
  }

  drawBackground();
  drawPlayer();
  drawObstacles();
  detectCollision();

  player.vy += player.gravity;
  player.y += player.vy;
  if (player.y > 300) player.y = 300;

  if (frame % 100 === 0) createObstacle();
  updateScore();

  frame++;
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
