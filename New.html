<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Aerial Rhythm â€“ Black Moon Edition</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background: radial-gradient(circle, #0a0a15, #000);
        font-family: Arial, sans-serif;
        color: white;
        overflow: hidden;
        user-select: none;
    }

    /* Quitar cuadro azul */
    * { outline: none !important; }
    :focus { outline: none !important; }

    #game-container {
        width: 100vw;
        height: 100vh;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #menu {
        text-align: center;
        animation: fadeIn 1.5s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }

    .btn {
        background: #a020f0;
        border: none;
        padding: 15px 25px;
        margin: 10px;
        border-radius: 10px;
        color: white;
        font-size: 18px;
        cursor: pointer;
        transition: 0.3s;
    }

    .btn:hover {
        background: #ff48ff;
        transform: scale(1.1);
    }

    #notes-area {
        width: 400px;
        height: 500px;
        border: 3px solid #ffffff55;
        display: none;
        position: relative;
    }

    .lane {
        width: 25%;
        height: 100%;
        float: left;
        border-right: 1px solid #ffffff22;
    }

    .note {
        width: 100%;
        height: 25px;
        background: #ff48ff;
        position: absolute;
        border-radius: 5px;
    }

    #hit-bar {
        position: absolute;
        bottom: 20px;
        width: 100%;
        height: 10px;
        background: #ffffff55;
    }

    #score {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 22px;
        display: none;
    }

    /* Personajes */
    #character {
        position: absolute;
        right: 30px;
        bottom: 20px;
        font-size: 20px;
        opacity: 0.7;
    }
</style>
</head>
<body>

<div id="game-container">

    <div id="menu">
        <h1>ðŸŽ¶ Aerial Rhythm â€“ Black Moon Edition</h1>
        <p>Elige tu canciÃ³n y vuela entre las notas</p>
        <button class="btn" onclick="startGame(0)">CanciÃ³n 1 â€“ Lunar Flow</button>
        <button class="btn" onclick="startGame(1)">CanciÃ³n 2 â€“ Eclipse Beats</button>
        <button class="btn" onclick="startGame(2)">CanciÃ³n 3 â€“ Telas del Cielo</button>
    </div>

    <div id="score">Puntos: 0</div>

    <div id="notes-area">
        <div class="lane" id="lane0"></div>
        <div class="lane" id="lane1"></div>
        <div class="lane" id="lane2"></div>
        <div class="lane" id="lane3"></div>
        <div id="hit-bar"></div>
    </div>

    <div id="character">ðŸŒ“ Isis Moon</div>

</div>

<script>
    let songs = [
        "6.-Silencio de la Noche.m4a",
        "8.-Soy un Quetzal en el Viento.m4a",
        "9.-Soy un fÃ©nix en el aire.m4a"
    ];

    let score = 0;
    let gameRunning = false;
    let noteInterval;
    let activeNotes = [];

    function startGame(songIndex) {
        document.getElementById("menu").style.display = "none";
        document.getElementById("notes-area").style.display = "block";
        document.getElementById("score").style.display = "block";

        score = 0;
        updateScore();

        let music = new Audio(songs[songIndex]);
        music.volume = 0.8;
        music.play();

        gameRunning = true;
        noteInterval = setInterval(spawnNote, 600);
        gameLoop();
    }

    function spawnNote() {
        let lane = Math.floor(Math.random() * 4);
        let note = document.createElement("div");
        note.classList.add("note");
        note.style.top = "-30px";
        document.getElementById("lane" + lane).appendChild(note);

        activeNotes.push({
            element: note,
            lane: lane,
            y: -30
        });
    }

    function updateScore() {
        document.getElementById("score").innerHTML = "Puntos: " + score;
    }

    function gameLoop() {
        if (!gameRunning) return;

        activeNotes.forEach((noteObj, index) => {
            noteObj.y += 4;
            noteObj.element.style.top = noteObj.y + "px";

            if (noteObj.y > 460) {
                noteObj.element.remove();
                activeNotes.splice(index, 1);
            }
        });

        requestAnimationFrame(gameLoop);
    }

    /* Controles con flechas */
    document.addEventListener("keydown", (e) => {
        let lanePressed = null;

        if (e.key === "ArrowLeft") lanePressed = 0;
        if (e.key === "ArrowUp") lanePressed = 1;
        if (e.key === "ArrowDown") lanePressed = 2;
        if (e.key === "ArrowRight") lanePressed = 3;

        if (lanePressed === null) return;

        /* Verificar notas cercanas */
        activeNotes.forEach((noteObj, index) => {
            if (noteObj.lane === lanePressed && noteObj.y > 420 && noteObj.y < 480) {
                score += 100;
                updateScore();
                noteObj.element.remove();
                activeNotes.splice(index, 1);
            }
        });
    });
</script>

</body>
</html>

